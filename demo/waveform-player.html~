<head>
<style>
.bar
{
	position: absolute;
	border-left: 1px solid #66F;
	width: 0px;
}
#wave
{
	position: relative;
	height: 400px;
	overflow-x: scroll;
	overflow-y: hidden;
}
</style>
</head>

<body>
<div id='wave'></div>
<script src='../music/Jubilant-sample.js'></script>
<script src='../third_party/buzz.js'></script>
<script>
var height=400;
var horiscale=50;
var cursor=value(height/2);
var wave=document.getElementById('wave');
cursor.style.borderLeft='1px solid #F66';
cursor.style.top='0px';
cursor.style.left='0px';
cursor.style.height=height+'px';
for( var i=0; i<data.data.length; i++)
{
	value(data.data[i]);
}
var mysound = new buzz.sound('../music/Jubilant', {
    formats: ['mp3','ogg']
});
mysound
.play()
.bind('timeupdate', function(e) {
    cursor.style.left=(this.getTime()*horiscale)+'px';
	wave.scrollLeft=(this.getTime()*horiscale-100);
});
//
function value(sam)
{
	var wave=document.getElementById('wave');
	var bar = document.createElement('div');
	bar.setAttribute('class','bar');
	if( sam.v>0)
	{
		bar.style.height=(sam.v+'px');
		bar.style.top=(height/2-sam.v)+'px';
	}
	else
	{
		bar.style.height=(-sam.v+'px');
		bar.style.top=(height/2)+'px';
	}
	bar.style.left=(sam.t*horiscale)+'px';
	wave.appendChild(bar);
	return bar;
}
</script>
</body>
